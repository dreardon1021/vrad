(this.webpackJsonpvrad=this.webpackJsonpvrad||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/marker.1fb36206.png"},31:function(e,t,a){e.exports=a.p+"static/media/denver-background.75626fae.jpg"},32:function(e,t,a){e.exports=a.p+"static/media/left.ecdc2137.png"},33:function(e,t,a){e.exports=a.p+"static/media/right.203b0311.png"},34:function(e,t,a){e.exports=a(55)},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(17),r=a.n(s),l=(a(39),a(8)),o=a(9),c=a(10),m=a(11),u=(a(40),a(41),a(6)),d=a(18),g=a.n(d),h=function(e){return i.a.createElement("nav",null,i.a.createElement("div",{className:"logo-nav"},i.a.createElement(u.b,{to:"/areas",className:"title-text"},i.a.createElement("img",{className:"nav-marker",src:g.a,alt:""})),i.a.createElement("h2",{className:"nav-title"},i.a.createElement(u.b,{to:"/areas",className:"title-text"},"VRAD"))),e.userinfo.name&&i.a.createElement("div",{className:"logged-in-elements"},i.a.createElement("div",{className:"greeting-btn-container"},i.a.createElement("h2",{className:"greeting"},"Hello, ",e.userinfo.name),i.a.createElement("div",{className:"trip-type"},"Trip type: ",e.userinfo.visitReason)),i.a.createElement("div",{className:"nav-btn-container fav-btn"},i.a.createElement(u.b,{to:"/favorites",className:"nav-btn"},"Favorites (",e.userinfo.favorites.length,")")),i.a.createElement("div",{onClick:function(t){return e.logOutUser(t)},className:"nav-btn-container"},i.a.createElement("button",{className:"nav-btn"},"Log out"))))},f=a(30),v=(a(47),a(31)),p=a.n(v),E=function(e){Object(m.a)(a,e);var t=Object(c.a)(a);function a(e){var n;e.logInUser;return Object(l.a)(this,a),(n=t.call(this)).updateFormState=function(e){var t=e.target,a=t.name,i=t.value;n.setState(Object(f.a)({},a,i),n.checkField(a,i))},n.checkField=function(e,t){var a=n.state.nameValid,i=n.state.emailValid,s=n.state.reasonValid;switch(e){case"username":a=/[A-Za-z]/i.test(t);break;case"email":i=/\S+@\S+\.\S+/.test(String(t).toLowerCase());break;case"visitReason":s=/[^("")]/.test(t)}n.setState({nameValid:a,emailValid:i,reasonValid:s},n.validateForm)},n.validateForm=function(){n.setState({formValid:n.state.nameValid&&n.state.emailValid&&n.state.reasonValid})},n.throwErrorMessage=function(){return n.state.nameValid?n.state.emailValid?n.state.reasonValid?void 0:"Please enter a reason for your visit":"Please enter a valid email address":"Please enter a valid name"},n.submitLogin=function(e){e.preventDefault();var t={name:n.state.username,email:n.state.email,visitReason:n.state.visitReason,favorites:[]};n.state.formValid?n.props.logInUser(t):n.setState({loginFailed:!0})},n.state={username:"",email:"",visitReason:"",nameValid:!1,emailValid:!1,reasonValid:!1,formValid:!1,loginFailed:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state.formValid?i.a.createElement(u.c,{className:"login-button",to:"/areas",role:"button"},"Login"):i.a.createElement("button",{className:"login-button"},"Login"),a=this.throwErrorMessage();return i.a.createElement("section",{className:"login-background"},i.a.createElement("div",{className:"form-container"},i.a.createElement("form",{"data-testid":"form"},i.a.createElement("div",{className:"header-container"},i.a.createElement("div",{className:"logo-container"},i.a.createElement("img",{className:"marker",src:g.a,alt:""}),i.a.createElement("h2",{"data-testid":"header",className:"login-header"},"VRAD")),i.a.createElement("h3",{className:"slogan"},"Vacation Rentals Around Denver")),i.a.createElement("p",{className:"error-message"},this.state.loginFailed?a:""),i.a.createElement("div",{className:"inputs-container"},i.a.createElement("input",{className:"name-input",name:"username",placeholder:"Name",type:"text",value:this.state.username,onChange:function(t){return e.updateFormState(t)}}),i.a.createElement("input",{name:"email",placeholder:"Email",type:"email",value:this.state.email,onChange:function(t){return e.updateFormState(t)}})),i.a.createElement("select",{"data-testid":"select",name:"visitReason",value:this.state.visitReason,onChange:function(t){return e.updateFormState(t)}},i.a.createElement("option",{value:""},"Reason for visit"),i.a.createElement("option",{value:"business"},"Business"),i.a.createElement("option",{value:"vacation"},"Vacation"),i.a.createElement("option",{value:"other"},"Other")),i.a.createElement("div",{className:"login-button-container",onClick:function(t){return e.submitLogin(t)}},t))),i.a.createElement("div",{className:"img-container"},i.a.createElement("img",{className:"hero-img",src:p.a,alt:""})))}}]),a}(n.Component),b=(a(48),a(49),function(e){var t=e.about,a=e.id,n=e.shortName,s=(e.longName,e.chooseNeighborhood,n.replace(/\s/g,"").toLowerCase()),r="/vrad"+"/images/neighborhoods/".concat(s,".jpg");return i.a.createElement("article",{id:a},i.a.createElement("div",{className:"article-inner"},i.a.createElement("div",{className:"title-image-description-container"},i.a.createElement("div",{className:"title-subtitle-container"},i.a.createElement("h3",{className:"area-title"},n)),i.a.createElement("img",{className:"neighborhood-image",src:r,alt:""}),i.a.createElement("div",{className:"area-card-info"},i.a.createElement("p",{className:"about"},t))),i.a.createElement("div",{name:a,className:"view-listings-button-container"},i.a.createElement(u.c,{to:"/areas/"+a+"/listings",className:"view-listings-button",name:a,role:"button","data-testid":a},"View Listings"))))}),N=function(e){Object(m.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={selectedArea:""},n}return Object(o.a)(a,[{key:"render",value:function(){return i.a.createElement("section",{"data-testid":"card-container",className:"areas-card-container"},this.props.areas.map((function(e){return i.a.createElement(b,{"data-testid":"card",about:e.about,id:e.id,key:e.id,shortName:e.area,longName:e.name})})))}}]),a}(n.Component),I=(a(50),a(51),function(e){return i.a.createElement("div",{"data-testid":"listing-card",className:e.highlighted?"card highlighted":"card"},i.a.createElement("div",{className:"property-title"},i.a.createElement("h3",{className:"property-title-text"},e.name)),i.a.createElement("div",{className:"image-btn"},i.a.createElement("img",{src:"/vrad/images/"+e.listing_id+"_a.jpg",className:"listings-page-img",alt:e.name}),i.a.createElement("div",{className:"btns-container"},i.a.createElement(u.b,{to:"/areas/"+e.area_id+"/listings/"+e.listing_id,className:"listings-btn","data-testid":e.listing_id},"View"),i.a.createElement("div",{"data-testid":"favorite-btn",className:"listing-heart-container",onClick:function(t){return e.addDeleteFavorite(e.listing_id)}},i.a.createElement("i",{className:e.favorite?"fas fa-heart listing-heart listing-heart-active fa-2x":"fas fa-heart listing-heart listing-heart-inactive fa-2x"})))))}),k=a(57),O=a(58),j=a(59),S=a(60),_=a(5),y=(a(52),function(e){Object(m.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onMarkerClicked=function(e){var t=e.target.options.listing;n.setState({selectedPlace:t,showingInfoWindow:!0}),n.props.highlightListing(n.state.selectedPlace.listing_id)},n.onMapClicked=function(e){n.state.showingInfoWindow&&(n.setState({showingInfoWindow:!1,activeMarker:null,selectedPlace:""}),n.props.highlightListing(n.state.selectedPlace.listing_id))},n.state={lat:39.742043,lng:-104.991531,zoom:13,showingInfoWindow:!1,activeMarker:{},selectedPlace:{}},n}return Object(o.a)(a,[{key:"render",value:function(){var e,t=this;this.props.listings[0]&&(e=Object(_.latLngBounds)([this.props.listings[0].lat,this.props.listings[0].lng],[this.props.listings[0].lat,this.props.listings[0].lng]),this.props.listings.forEach((function(t){e.extend([t.lat,t.lng])})));var a=[this.state.lat,this.state.lng],n=this.props.listings.map((function(e){return console.log(e),i.a.createElement(k.a,{position:[e.lat,e.lng],onClick:function(e){return t.onMarkerClicked(e)},listing:e},i.a.createElement(O.a,null,e.name,", $",e.details.cost_per_night))}));return i.a.createElement(j.a,{center:a,zoom:this.state.zoom,bounds:e,onClick:this.onMapClicked},i.a.createElement(S.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}),n)}}]),a}(n.Component)),w=function(e){Object(m.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).highlightListing=function(e){n.setState({highlightedListing:e})},n.getLatLong=function(e){var t=e.map((function(e){return fetch("https://nominatim.openstreetmap.org/?addressdetails=1&q=".concat(e.address.street.split(" ").join("+"),"+").concat(e.address.zip,"&format=json&limit=1")).then((function(e){return e.json()})).then((function(t){return{listing_id:e.listing_id,area_id:e.area_id,name:e.name,lat:t[0].lat,lng:t[0].lon,address:e.address,details:e.details}})).catch((function(e){return console.log(e)}))}));Promise.all(t).then((function(e){return n.setState({listingsToMap:e})}))},n.state={listingsToMap:[],highlightedListing:{}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getLatLong(this.props.listingsData)}},{key:"render",value:function(){var e=this;return i.a.createElement("section",{"data-testid":"listing-container",className:"listings-card-container"}," ",i.a.createElement("h2",{className:"listings-header"},this.props.pathname.includes("/favorites")?"Favorites":""),0===this.props.favorites.length&&"/favorites"===this.props.pathname?i.a.createElement("div",{class:"no-favorites"},i.a.createElement("h3",null,"You have no favorites!")):"",i.a.createElement("div",{className:"listings-container-inner"},i.a.createElement("div",{className:" card-map-container"},i.a.createElement(y,{listings:this.state.listingsToMap,highlightListing:this.highlightListing})),i.a.createElement("div",{className:"listing-tiles"},this.props.listingsData.map((function(t){return i.a.createElement(I,{highlighted:e.state.highlightedListing===t.listing_id,name:t.name,listing_id:t.listing_id,area_id:e.props.area_id,key:t.listing_id,favorite:e.props.favorites.includes(t.listing_id),addDeleteFavorite:e.props.addDeleteFavorite})})))))}}]),a}(n.Component),x=(a(53),a(54),a(32)),C=a.n(x),F=a(33),L=a.n(F),V=function(e){Object(m.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={currentImageIndex:0},n}return Object(o.a)(a,[{key:"mod",value:function(e,t){return(e%t+t)%t}},{key:"changeImage",value:function(e){var t="right"===e.target.name?this.mod(this.state.currentImageIndex+1,3):this.mod(this.state.currentImageIndex-1,3);this.setState({currentImageIndex:t})}},{key:"render",value:function(){var e=this,t=["a","b","c"];return i.a.createElement("section",{className:"carousel"},i.a.createElement("img",{src:"/vrad/images/"+this.props.listing_id+"_"+t[this.state.currentImageIndex]+".jpg",className:"details-img",alt:this.props.listing_id+"_"+t[this.state.currentImageIndex]}),i.a.createElement("div",{className:"carousel-control"},i.a.createElement("div",{className:"carousel-back",onClick:function(t){return e.changeImage(t)}},i.a.createElement("img",{src:C.a,alt:"left-arrow",className:"control-item",name:"left",onClick:function(t){return e.changeImage(t)}})),i.a.createElement("div",null,i.a.createElement("p",{className:"image-number"},"Photo ",this.state.currentImageIndex+1," of 3")),i.a.createElement("div",{className:"carousel-forward",onClick:function(t){return e.changeImage(t)}},i.a.createElement("img",{src:L.a,alt:"right-arrow",className:"control-item",name:"right"}))))}}]),a}(n.Component),D=function(e){var t=e.selectedListing,a=e.addDeleteFavorite,n=e.favorites,s=t.name,r=t.address,l=t.details,o=t.listing_id,c=r.street,m=r.zip,u=l.beds,d=l.baths,g=l.cost_per_night,h=l.features;return i.a.createElement("section",{className:"details"},i.a.createElement("div",{className:"title-btn-container"},i.a.createElement("div",{className:"title-address-container"},i.a.createElement("h1",{className:"details-title"},s),i.a.createElement("h2",{className:"details-address"},c," ",m)),i.a.createElement("button",{className:n.includes(o)?"details-active":"details-fav-btn",onClick:function(e){return a(o)}},i.a.createElement("i",{className:n.includes(o)?"fas fa-heart":"far fa-heart"}),"Favorite")),i.a.createElement("div",{className:"details-body"},i.a.createElement("div",{className:"other-details-container"},i.a.createElement("div",{className:"bed-bath-container"},i.a.createElement("div",{className:"bed-bath-display"},i.a.createElement("div",{className:"num-beds"},u)," ",i.a.createElement("div",null,"beds")),i.a.createElement("div",{className:"bed-bath-display"},i.a.createElement("div",{className:"num-baths"},d)," ",i.a.createElement("div",null,"baths"))),i.a.createElement("div",{className:"cost-per-night-container"},i.a.createElement("span",{className:"cost-highlight"},"$",g),"/night"),!!h.length&&i.a.createElement("div",{className:"features-list"},i.a.createElement("h3",{className:"features-title"},"Features"),i.a.createElement("ul",null,h.map((function(e,t){return i.a.createElement("li",{key:t},function(e){var t=e.split("");return t[0]=t[0].toUpperCase(),t.join("")}(e))}))))),i.a.createElement(V,{listing_id:o})))},R=a(15),M=function(e){Object(m.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).getListingsData=function(t){(function(e){var t=e.reduce((function(e,t){return t.listings.forEach((function(t){return e.push(t)})),e}),[]).map((function(e){return fetch("https://vrad-api.herokuapp.com"+e).then((function(e){return e.json()}))}));return Promise.all(t)})(t).then((function(t){return e.setState({listings:t})}))},e.logInUser=function(t){e.setState({userInfo:t}),localStorage.setItem("userInfo",JSON.stringify(t))},e.addDeleteFavorite=function(t){var a=e.state.userInfo.favorites;if(a.includes(t))a.splice(a.indexOf(t),1),e.setState({userInfo:{name:e.state.userInfo.name,email:e.state.userInfo.email,visitReason:e.state.userInfo.visitReason,favorites:a}},(function(){return localStorage.setItem("userInfo",JSON.stringify(e.state.userInfo))}));else{var n=a.concat([t]);e.setState({userInfo:{name:e.state.userInfo.name,email:e.state.userInfo.email,visitReason:e.state.userInfo.visitReason,favorites:n}},(function(){return localStorage.setItem("userInfo",JSON.stringify(e.state.userInfo))}))}},e.logOutUser=function(){localStorage.setItem("userInfo",JSON.stringify({name:"",email:"",visitReason:"",favorites:[]})),e.setState({userInfo:{name:"",email:"",visitReason:"",favorites:[]}})},e.state={userInfo:{name:"",email:"",visitReason:"",favorites:[]},areas:[],listings:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(fetch("https://vrad-api.herokuapp.com/api/v1/areas").then((function(e){return e.json()})).then((function(e){var t=e.areas.map((function(e){return fetch("https://vrad-api.herokuapp.com"+e.details).then((function(e){return e.json()})).then((function(t){return{area:e.area,about:t.about,id:t.id,name:t.name,listings:t.listings}}))}));return Promise.all(t)})).then((function(t){e.setState({areas:t}),e.getListingsData(t)})).catch((function(e){return console.error(e)})),!this.state.userInfo.name&&(console.log("no one signed in"),console.log(JSON.parse(localStorage.getItem("userInfo"))),JSON.parse(localStorage.getItem("userInfo")))){var t=JSON.parse(localStorage.getItem("userInfo"));this.setState({userInfo:t})}}},{key:"render",value:function(){var e=this;return console.log(this.state.userInfo),i.a.createElement("div",null,this.state.userInfo.name&&i.a.createElement(h,{userinfo:this.state.userInfo,logOutUser:this.logOutUser}),i.a.createElement("main",null,i.a.createElement(R.b,{exact:!0,path:"/",render:function(t){return e.state.userInfo.name?i.a.createElement(R.a,{to:{pathname:"/areas"}}):i.a.createElement(E,Object.assign({logInUser:e.logInUser},t))}}),i.a.createElement(R.b,{exact:!0,path:"/areas",render:function(t){return e.state.userInfo.name?i.a.createElement(N,Object.assign({areas:e.state.areas},t)):i.a.createElement(R.a,{to:{pathname:"/"}})}}),i.a.createElement(R.b,{exact:!0,path:"/areas/:id/listings",render:function(t){var a=t.match,n=t.history;console.log(e.state);var s=a.params.id,r=n.location.pathname,l=e.state.listings.filter((function(e){return e.area_id===parseInt(s)}));return e.state.userInfo.name?i.a.createElement(w,{listingsData:l,area_id:parseInt(s),pathname:r,favorites:e.state.userInfo.favorites,addDeleteFavorite:e.addDeleteFavorite}):i.a.createElement(R.a,{to:{pathname:"/"}})}}),i.a.createElement(R.b,{exact:!0,path:"/areas/:id/listings/:listing",render:function(t){var a=t.match.params.listing,n=e.state.listings.find((function(e){return e.listing_id===parseInt(a)}));if(e.state.listings.length>0)return e.state.userInfo.name?i.a.createElement(D,{selectedListing:n,addDeleteFavorite:e.addDeleteFavorite,favorites:e.state.userInfo.favorites}):i.a.createElement(R.a,{to:{pathname:"/"}})}}),i.a.createElement(R.b,{exact:!0,path:"/favorites",render:function(t){var a=t.location.pathname,n=e.state.userInfo.favorites.map((function(t){return e.state.listings.find((function(e){return e.listing_id===t}))}));return e.state.userInfo.name?i.a.createElement(w,Object.assign({listingsData:n},t,{pathname:a,favorites:e.state.userInfo.favorites,addDeleteFavorite:e.addDeleteFavorite})):i.a.createElement(R.a,{to:{pathname:"/"}})}})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=i.a.createElement(u.a,{basename:"/vrad"},i.a.createElement(M,null));r.a.render(P,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.7bff9338.chunk.js.map